library(plm)
library(car)

pdata <- pdata.frame(as.data.frame(data_tsibble), index = c("Country", "Year"))

# Fit Models
fixed_model <- plm(EVSales ~ TK*, data = pdata, model = "within")  # *use actual variable names
random_model <- plm(EVSales ~ TK*, data = pdata, model = "random")  # *use actual variable names

# Perform Hausman Test
hausman_test <- phtest(fixed_model, random_model)
print(hausman_test)

# Interpret the Results
# If the p-value is small (e.g., p<0.05p<0.05): Reject the null hypothesis (H0: Random effects are consistent and efficient, suitable model is random effects).
# If the p-value is large (e.g., p>0.05p>0.05): Fail to reject the null hypothesis (H0: Random effects are consistent and efficient, suitable model is fixed effects).

